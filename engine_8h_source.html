<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>memcachedpublicAPI: include/memcached/engine.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>include/memcached/engine.h</h1><a href="engine_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef MEMCACHED_ENGINE_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define MEMCACHED_ENGINE_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;stdbool.h&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#include &quot;<a class="code" href="protocol__binary_8h.html">memcached/protocol_binary.h</a>&quot;</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00012"></a>00012 <span class="preprocessor">#endif</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span>
<a name="l00041"></a><a class="code" href="group___engine.html#ga502bebaa798b3401940137a7a16d8fe5">00041</a> <span class="preprocessor">#define ENGINE_INTERFACE_VERSION 1</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00046"></a><a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942">00046</a>     <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00047"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942ad5c10635facfa57b4d23b37dc5de73c3">00047</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942ad5c10635facfa57b4d23b37dc5de73c3" title="The command executed successfully.">ENGINE_SUCCESS</a>     = 0x00, 
<a name="l00048"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a2f712a400c3121c42e2082b75c912da5">00048</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a2f712a400c3121c42e2082b75c912da5" title="The key does not exists.">ENGINE_KEY_ENOENT</a>  = 0x01, 
<a name="l00049"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a80fcc05d0bffde2586a240b03e75c4c6">00049</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a80fcc05d0bffde2586a240b03e75c4c6" title="The key already exists.">ENGINE_KEY_EEXISTS</a> = 0x02, 
<a name="l00050"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a561301c14a22433e53f1cbe2d6082323">00050</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a561301c14a22433e53f1cbe2d6082323" title="Could not allocate memory.">ENGINE_ENOMEM</a>      = 0x03, 
<a name="l00051"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a978a54138d02ca14624e3ce751568428">00051</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a978a54138d02ca14624e3ce751568428" title="The item was not stored.">ENGINE_NOT_STORED</a>  = 0x04, 
<a name="l00052"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a33b39d8861f1243067e21c3f4cac28ee">00052</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a33b39d8861f1243067e21c3f4cac28ee" title="Invalid arguments.">ENGINE_EINVAL</a>      = 0x05, 
<a name="l00053"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a8269d8b3f2b991157ffe881e399c8e79">00053</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a8269d8b3f2b991157ffe881e399c8e79" title="The engine does not support this.">ENGINE_ENOTSUP</a>     = 0x06, 
<a name="l00054"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a7eb36788d96ba4f334a87c27842d6785">00054</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a7eb36788d96ba4f334a87c27842d6785" title="This would cause the engine to block.">ENGINE_EWOULDBLOCK</a> = 0x07, 
<a name="l00055"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a9381fefc09e75ace2d7879b1a9ae870a">00055</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a9381fefc09e75ace2d7879b1a9ae870a" title="The data is too big for the engine.">ENGINE_E2BIG</a>       = 0x08, 
<a name="l00056"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942afcdb2411547eaeb01c8eebf3e13a6c6c">00056</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942afcdb2411547eaeb01c8eebf3e13a6c6c" title="The engine want more data if the frontend have more data available.">ENGINE_WANT_MORE</a>   = 0x09, 
<a name="l00058"></a><a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a86a31e7fdd6d4015d03238f75c7bd37d">00058</a>         <a class="code" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a86a31e7fdd6d4015d03238f75c7bd37d" title="Generic failue.">ENGINE_FAILED</a>      = 0xff  
<a name="l00059"></a>00059     } <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a>;
<a name="l00060"></a>00060 
<a name="l00064"></a><a class="code" href="group___engine.html#ga319505a6161227851720785676bade01">00064</a>     <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00065"></a><a class="code" href="group___engine.html#gga319505a6161227851720785676bade01accfb4a0fba17f4822ae1f255c742afe3">00065</a>         <a class="code" href="group___engine.html#gga319505a6161227851720785676bade01accfb4a0fba17f4822ae1f255c742afe3" title="Store with add semantics.">OPERATION_ADD</a> = 1, 
<a name="l00066"></a><a class="code" href="group___engine.html#gga319505a6161227851720785676bade01a5662626ceb79917533976176d46e72fa">00066</a>         <a class="code" href="group___engine.html#gga319505a6161227851720785676bade01a5662626ceb79917533976176d46e72fa" title="Store with set semantics.">OPERATION_SET</a>,     
<a name="l00067"></a><a class="code" href="group___engine.html#gga319505a6161227851720785676bade01a4d7a993794c148cf0c3ad30271a6ed91">00067</a>         <a class="code" href="group___engine.html#gga319505a6161227851720785676bade01a4d7a993794c148cf0c3ad30271a6ed91" title="Store with replace semantics.">OPERATION_REPLACE</a>, 
<a name="l00068"></a><a class="code" href="group___engine.html#gga319505a6161227851720785676bade01aa05f4b18e658a526bf0669e433dfe565">00068</a>         <a class="code" href="group___engine.html#gga319505a6161227851720785676bade01aa05f4b18e658a526bf0669e433dfe565" title="Store with append semantics.">OPERATION_APPEND</a>,  
<a name="l00069"></a><a class="code" href="group___engine.html#gga319505a6161227851720785676bade01a297f0f42746c0cc2ef547595e8cf9d9c">00069</a>         <a class="code" href="group___engine.html#gga319505a6161227851720785676bade01a297f0f42746c0cc2ef547595e8cf9d9c" title="Store with prepend semantics.">OPERATION_PREPEND</a>, 
<a name="l00070"></a><a class="code" href="group___engine.html#gga319505a6161227851720785676bade01aae1d377f8eb91d018875f2a95b01cff9">00070</a>         <a class="code" href="group___engine.html#gga319505a6161227851720785676bade01aae1d377f8eb91d018875f2a95b01cff9" title="Store with set semantics.">OPERATION_CAS</a>      
<a name="l00071"></a>00071     } <a class="code" href="group___engine.html#ga319505a6161227851720785676bade01" title="Engine storage operations.">ENGINE_STORE_OPERATION</a>;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 
<a name="l00074"></a><a class="code" href="group___engine.html#ga11c03b3612747ce345a6ec0c6ccd7893">00074</a> <span class="preprocessor">#define ITEM_WITH_CAS 1</span>
<a name="l00075"></a><a class="code" href="group___engine.html#gae6cbea0e711f9422c80bf4e6ece3afb6">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define ITEM_KEY_PTR  2</span>
<a name="l00076"></a><a class="code" href="group___engine.html#gaf59030959ca179578d3ba848448866eb">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define ITEM_DATA_PTR 4</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00079"></a><a class="code" href="group___engine.html#gae315dc9bbd0d1cb8fbdacca8e31fd20e">00079</a>     <span class="keyword">typedef</span> uint32_t <a class="code" href="group___engine.html#gae315dc9bbd0d1cb8fbdacca8e31fd20e" title="Time relative to server start.">rel_time_t</a>;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 
<a name="l00083"></a>00083     rel_time_t <a class="code" href="group___engine.html#ga1ff8f68d7b14e73348265f6e1ce933e8" title="Get the relative time for the given time_t value.">realtime</a>(<span class="keyword">const</span> time_t exptime);
<a name="l00085"></a>00085     <span class="keyword">extern</span> <span class="keyword">volatile</span> rel_time_t <a class="code" href="group___engine.html#ga21b2a3d4ff751fe99cdca2d14babc559" title="The current time.">current_time</a>;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 
<a name="l00091"></a><a class="code" href="structitem.html">00091</a>     <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00092"></a><a class="code" href="structitem.html#a7add9b3fde75f4eded5ce70bb69296ca">00092</a>         rel_time_t exptime; 
<a name="l00094"></a><a class="code" href="structitem.html#a79fd2b2d8c1f09aed8aa4c3461f0fece">00094</a>         uint32_t   nbytes;  
<a name="l00095"></a><a class="code" href="structitem.html#ab85ade8c803d109a5fefd2304afe4dd7">00095</a>         uint32_t   flags;   
<a name="l00096"></a><a class="code" href="structitem.html#a1d083ed8c1ec0bf75ba219db7a14da51">00096</a>         uint16_t   nkey;    
<a name="l00097"></a><a class="code" href="structitem.html#a364d670742bc1996edcc7ea809c85676">00097</a>         uint16_t   iflag;   
<a name="l00100"></a>00100     } <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>;
<a name="l00101"></a>00101 
<a name="l00105"></a>00105     uint64_t <a class="code" href="group___engine.html#gac0d2c2ceff296e9aeceb5d58811b8012" title="Get the CAS ID from an item.">ITEM_get_cas</a>(<span class="keyword">const</span> <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>*);
<a name="l00109"></a>00109     <span class="keywordtype">void</span> <a class="code" href="group___engine.html#ga625b514611a2e965f5945d3623aaa00e" title="Set the CAS id on an item.">ITEM_set_cas</a>(<a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>*, uint64_t);
<a name="l00113"></a>00113     <span class="keywordtype">char</span>* <a class="code" href="group___engine.html#ga5e73e3731b3b8eec3c6e40a73cb50d17" title="Get the key from an item.">ITEM_key</a>(<span class="keyword">const</span> <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>*);
<a name="l00117"></a>00117     <span class="keywordtype">char</span>* <a class="code" href="group___engine.html#ga6d25447921c853b31fdd9852f72848cf" title="Get the data from an item.">ITEM_data</a>(<span class="keyword">const</span> <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>*);
<a name="l00121"></a>00121     <span class="keywordtype">void</span> <a class="code" href="group___engine.html#ga2485797b0e4edea9d47cdaf7977c8a0f" title="Set the location of the data for the given item.">ITEM_set_data_ptr</a>(<span class="keyword">const</span> <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>*, <span class="keywordtype">void</span>*);
<a name="l00125"></a>00125     <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t ITEM_clsid(<span class="keyword">const</span> <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>* <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>) {
<a name="l00126"></a>00126         <span class="keywordflow">return</span> 0;
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 
<a name="l00132"></a>00132     <span class="keywordtype">void</span> <a class="code" href="group___engine.html#gad16ff47a409662290ca28b2765ce5c1d" title="Let a connection know that IO has completed.">notify_io_complete</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *cookie, <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> status);
<a name="l00133"></a>00133 
<a name="l00143"></a><a class="code" href="group___engine.html#gab8d9bd9ba0b7b765633bf9b6cbd6aa30">00143</a>     <span class="keyword">typedef</span> void (*<a class="code" href="group___engine.html#gab8d9bd9ba0b7b765633bf9b6cbd6aa30" title="Callback for any function producing stats.">ADD_STAT</a>)(<span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keyword">const</span> uint16_t klen,
<a name="l00144"></a>00144                              <span class="keyword">const</span> <span class="keywordtype">char</span> *val, <span class="keyword">const</span> uint32_t vlen,
<a name="l00145"></a>00145                              <span class="keyword">const</span> <span class="keywordtype">void</span> *cookie);
<a name="l00146"></a>00146 
<a name="l00161"></a><a class="code" href="group___engine.html#ga4f952131b9f47d1ad9f4a28290c9c8b0">00161</a>     <span class="keyword">typedef</span> void (*<a class="code" href="group___engine.html#ga4f952131b9f47d1ad9f4a28290c9c8b0" title="Callback for adding a response backet.">ADD_RESPONSE</a>)(<span class="keyword">const</span> <span class="keywordtype">void</span> *key, uint16_t keylen,
<a name="l00162"></a>00162                                  <span class="keyword">const</span> <span class="keywordtype">void</span> *ext, uint8_t extlen,
<a name="l00163"></a>00163                                  <span class="keyword">const</span> <span class="keywordtype">void</span> *body, uint32_t bodylen,
<a name="l00164"></a>00164                                  uint8_t datatype, uint16_t status,
<a name="l00165"></a>00165                                  uint64_t cas, <span class="keyword">const</span> <span class="keywordtype">void</span> *cookie);
<a name="l00166"></a>00166 
<a name="l00170"></a><a class="code" href="structengine__interface.html">00170</a>     <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">engine_interface</a>{
<a name="l00171"></a><a class="code" href="structengine__interface.html#aa8ab28f4ee24ab7c39b484e1a891ae4c">00171</a>         uint64_t <a class="code" href="structengine__interface.html#aa8ab28f4ee24ab7c39b484e1a891ae4c" title="The version number on the following structure.">interface</a>; 
<a name="l00172"></a>00172     } <a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>;
<a name="l00173"></a>00173 
<a name="l00185"></a><a class="code" href="group___engine.html#gac1f994c5da007d36f3a36789b8825663">00185</a>     <span class="keyword">typedef</span> <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<a class="code" href="group___engine.html#gac1f994c5da007d36f3a36789b8825663" title="The signature for the &amp;quot;create_instance&amp;quot; function exported from the module...">CREATE_INSTANCE</a>)(uint64_t interface,
<a name="l00186"></a>00186                                                  <a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>** handle);
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 
<a name="l00192"></a><a class="code" href="structengine__interface__v1.html">00192</a>     <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structengine__interface__v1.html" title="Definition of the first version of the engine interface.">engine_interface_v1</a> {
<a name="l00196"></a><a class="code" href="structengine__interface__v1.html#acb4a9ddd1b457a5392de8d61ae381ca8">00196</a>         <span class="keyword">struct </span><a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">engine_interface</a> interface;
<a name="l00197"></a>00197 
<a name="l00204"></a>00204         <span class="keyword">const</span> <span class="keywordtype">char</span>* (*get_info)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle);
<a name="l00205"></a>00205 
<a name="l00213"></a>00213         <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<a class="code" href="structengine__interface__v1.html#a190f91c616478c75d306d0c16f962554" title="Initialize an engine instance.">initialize</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle,
<a name="l00214"></a>00214                                         <span class="keyword">const</span> <span class="keywordtype">char</span>* config_str);
<a name="l00215"></a>00215 
<a name="l00221"></a>00221         void (*<a class="code" href="structengine__interface__v1.html#a184949b7c9f8d1ddbfa9c14fca221cd6" title="Tear down this engine.">destroy</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle);
<a name="l00222"></a>00222 
<a name="l00223"></a>00223         <span class="comment">/*</span>
<a name="l00224"></a>00224 <span class="comment">         * Item operations.</span>
<a name="l00225"></a>00225 <span class="comment">         */</span>
<a name="l00226"></a>00226 
<a name="l00242"></a>00242         <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<a class="code" href="structengine__interface__v1.html#a9e70dc7cafccddef523397e1c6abb9cf" title="Allocate an item.">allocate</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle,
<a name="l00243"></a>00243                                       <span class="keyword">const</span> <span class="keywordtype">void</span>* cookie,
<a name="l00244"></a>00244                                       <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a> **<a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>,
<a name="l00245"></a>00245                                       <span class="keyword">const</span> <span class="keywordtype">void</span>* key,
<a name="l00246"></a>00246                                       <span class="keyword">const</span> <span class="keywordtype">size_t</span> nkey,
<a name="l00247"></a>00247                                       <span class="keyword">const</span> <span class="keywordtype">size_t</span> nbytes,
<a name="l00248"></a>00248                                       <span class="keyword">const</span> <span class="keywordtype">int</span> flags,
<a name="l00249"></a>00249                                       <span class="keyword">const</span> rel_time_t exptime);
<a name="l00250"></a>00250 
<a name="l00260"></a>00260         <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<span class="keyword">remove</span>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle,
<a name="l00261"></a>00261                                     <span class="keyword">const</span> <span class="keywordtype">void</span>* cookie,
<a name="l00262"></a>00262                                     <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>* <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>);
<a name="l00263"></a>00263 
<a name="l00271"></a>00271         void (*<a class="code" href="structengine__interface__v1.html#abd6dfa858b32933e800a121f63efe4b5" title="Indicate that a caller who received an item no longer needs it.">release</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle, <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>* <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>);
<a name="l00272"></a>00272 
<a name="l00284"></a>00284         <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<span class="keyword">get</span>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle,
<a name="l00285"></a>00285                                  <span class="keyword">const</span> <span class="keywordtype">void</span>* cookie,
<a name="l00286"></a>00286                                  <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>** <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>,
<a name="l00287"></a>00287                                  <span class="keyword">const</span> <span class="keywordtype">void</span>* key,
<a name="l00288"></a>00288                                  <span class="keyword">const</span> <span class="keywordtype">int</span> nkey);
<a name="l00289"></a>00289 
<a name="l00301"></a>00301         <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<a class="code" href="structengine__interface__v1.html#ab546f254d738e5081d8c123b57590992" title="Store an item.">store</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle,
<a name="l00302"></a>00302                                    <span class="keyword">const</span> <span class="keywordtype">void</span> *cookie,
<a name="l00303"></a>00303                                    <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>* <a class="code" href="structitem.html" title="Data common to any item stored in memcached.">item</a>,
<a name="l00304"></a>00304                                    uint64_t *cas,
<a name="l00305"></a>00305                                    <a class="code" href="group___engine.html#ga319505a6161227851720785676bade01" title="Engine storage operations.">ENGINE_STORE_OPERATION</a> operation);
<a name="l00306"></a>00306 
<a name="l00324"></a>00324         <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<a class="code" href="structengine__interface__v1.html#acb1e81d8e7f6ca8e52f9c118c96cf170" title="Perform an increment or decrement operation on an item.">arithmetic</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle,
<a name="l00325"></a>00325                                         <span class="keyword">const</span> <span class="keywordtype">void</span>* cookie,
<a name="l00326"></a>00326                                         <span class="keyword">const</span> <span class="keywordtype">void</span>* key,
<a name="l00327"></a>00327                                         <span class="keyword">const</span> <span class="keywordtype">int</span> nkey,
<a name="l00328"></a>00328                                         <span class="keyword">const</span> <span class="keywordtype">bool</span> increment,
<a name="l00329"></a>00329                                         <span class="keyword">const</span> <span class="keywordtype">bool</span> create,
<a name="l00330"></a>00330                                         <span class="keyword">const</span> uint64_t delta,
<a name="l00331"></a>00331                                         <span class="keyword">const</span> uint64_t initial,
<a name="l00332"></a>00332                                         <span class="keyword">const</span> rel_time_t exptime,
<a name="l00333"></a>00333                                         uint64_t *cas,
<a name="l00334"></a>00334                                         uint64_t *result);
<a name="l00335"></a>00335 
<a name="l00345"></a>00345         <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<a class="code" href="structengine__interface__v1.html#a5f55f02a9cd954e40214068f1049bccd" title="Flush the cache.">flush</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle,
<a name="l00346"></a>00346                                    <span class="keyword">const</span> <span class="keywordtype">void</span>* cookie, time_t when);
<a name="l00347"></a>00347 
<a name="l00348"></a>00348         <span class="comment">/*</span>
<a name="l00349"></a>00349 <span class="comment">         * Statistics</span>
<a name="l00350"></a>00350 <span class="comment">         */</span>
<a name="l00351"></a>00351 
<a name="l00363"></a>00363         <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<a class="code" href="structengine__interface__v1.html#a2320667ba9a3bf499dc0e3593337077c" title="Get statistics from the engine.">get_stats</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle,
<a name="l00364"></a>00364                                        <span class="keyword">const</span> <span class="keywordtype">void</span>* cookie,
<a name="l00365"></a>00365                                        <span class="keyword">const</span> <span class="keywordtype">char</span>* stat_key,
<a name="l00366"></a>00366                                        <span class="keywordtype">int</span> nkey,
<a name="l00367"></a>00367                                        <a class="code" href="group___engine.html#gab8d9bd9ba0b7b765633bf9b6cbd6aa30" title="Callback for any function producing stats.">ADD_STAT</a> add_stat);
<a name="l00368"></a>00368 
<a name="l00374"></a>00374         void (*<a class="code" href="structengine__interface__v1.html#a89482f00c8538e80d48aca82ad641ade" title="Reset the stats.">reset_stats</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle);
<a name="l00375"></a>00375 
<a name="l00386"></a>00386         <a class="code" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942" title="Response codes for engine operations.">ENGINE_ERROR_CODE</a> (*<a class="code" href="structengine__interface__v1.html#aafc5304bd65c238b138d7cc3750cf1d7" title="Any unknown command will be considered engine specific.">unknown_command</a>)(<a class="code" href="structengine__interface.html" title="Generic opaque data structure for engines.">ENGINE_HANDLE</a>* handle,
<a name="l00387"></a>00387                                              <span class="keyword">const</span> <span class="keywordtype">void</span>* cookie,
<a name="l00388"></a>00388                                              <a class="code" href="unionprotocol__binary__request__header.html" title="Definition of the header structure for a request packet.">protocol_binary_request_header</a> *request,
<a name="l00389"></a>00389                                              <a class="code" href="group___engine.html#ga4f952131b9f47d1ad9f4a28290c9c8b0" title="Callback for adding a response backet.">ADD_RESPONSE</a> response);
<a name="l00390"></a>00390     } <a class="code" href="structengine__interface__v1.html" title="Definition of the first version of the engine interface.">ENGINE_HANDLE_V1</a>;
<a name="l00391"></a>00391 
<a name="l00396"></a>00396 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00397"></a>00397 <span class="preprocessor"></span>}
<a name="l00398"></a>00398 <span class="preprocessor">#endif</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span>
<a name="l00400"></a>00400 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Fri Nov 20 00:21:43 2009 for memcachedpublicAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
