<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>memcachedpublicAPI: include/memcached/engine.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>include/memcached/engine.h File Reference</h1><code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="protocol__binary_8h_source.html">memcached/protocol_binary.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for engine.h:</div>
<div class="dynsection">
<div class="center"><img src="engine_8h__incl.png" border="0" usemap="#include_2memcached_2engine_8h_map" alt=""/></div>
<map name="include_2memcached_2engine_8h_map" id="include_2memcached_2engine_8h">
<area shape="rect" id="node9" href="protocol__binary_8h.html" title="memcached/protocol_binary.h" alt="" coords="309,83,512,111"/></map>
</div>

<p><a href="engine_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structitem.html">item</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data common to any <a class="el" href="structitem.html" title="Data common to any item stored in memcached.">item</a> stored in memcached.  <a href="structitem.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface.html">engine_interface</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generic opaque data structure for engines.  <a href="structengine__interface.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structengine__interface__v1.html">engine_interface_v1</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Definition of the first version of the engine interface.  <a href="structengine__interface__v1.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga502bebaa798b3401940137a7a16d8fe5">ENGINE_INTERFACE_VERSION</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga11c03b3612747ce345a6ec0c6ccd7893">ITEM_WITH_CAS</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#gae6cbea0e711f9422c80bf4e6ece3afb6">ITEM_KEY_PTR</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#gaf59030959ca179578d3ba848448866eb">ITEM_DATA_PTR</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#gae315dc9bbd0d1cb8fbdacca8e31fd20e">rel_time_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Time relative to server start.  <a href="group___engine.html#gae315dc9bbd0d1cb8fbdacca8e31fd20e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#gab8d9bd9ba0b7b765633bf9b6cbd6aa30">ADD_STAT</a> )(const char *key, const uint16_t klen, const char *val, const uint32_t vlen, const void *cookie)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback for any function producing stats.  <a href="group___engine.html#gab8d9bd9ba0b7b765633bf9b6cbd6aa30"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga4f952131b9f47d1ad9f4a28290c9c8b0">ADD_RESPONSE</a> )(const void *key, uint16_t keylen, const void *ext, uint8_t extlen, const void *body, uint32_t bodylen, uint8_t datatype, uint16_t status, uint64_t cas, const void *cookie)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback for adding a response backet.  <a href="group___engine.html#ga4f952131b9f47d1ad9f4a28290c9c8b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structengine__interface.html">engine_interface</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#gada2e804f49f030565b3d87213d10a313">ENGINE_HANDLE</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generic opaque data structure for engines.  <a href="group___engine.html#gada2e804f49f030565b3d87213d10a313"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942">ENGINE_ERROR_CODE</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#gac1f994c5da007d36f3a36789b8825663">CREATE_INSTANCE</a> )(uint64_t interface, <a class="el" href="structengine__interface.html">ENGINE_HANDLE</a> **handle)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The signature for the "create_instance" function exported from the module.  <a href="group___engine.html#gac1f994c5da007d36f3a36789b8825663"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structengine__interface__v1.html">engine_interface_v1</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga31b9874f683847a88a7318fbe1556ca2">ENGINE_HANDLE_V1</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Definition of the first version of the engine interface.  <a href="group___engine.html#ga31b9874f683847a88a7318fbe1556ca2"></a><br/></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942">ENGINE_ERROR_CODE</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942ad5c10635facfa57b4d23b37dc5de73c3">ENGINE_SUCCESS</a> =  0x00, 
<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a2f712a400c3121c42e2082b75c912da5">ENGINE_KEY_ENOENT</a> =  0x01, 
<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a80fcc05d0bffde2586a240b03e75c4c6">ENGINE_KEY_EEXISTS</a> =  0x02, 
<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a561301c14a22433e53f1cbe2d6082323">ENGINE_ENOMEM</a> =  0x03, 
<br/>
&nbsp;&nbsp;<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a978a54138d02ca14624e3ce751568428">ENGINE_NOT_STORED</a> =  0x04, 
<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a33b39d8861f1243067e21c3f4cac28ee">ENGINE_EINVAL</a> =  0x05, 
<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a8269d8b3f2b991157ffe881e399c8e79">ENGINE_ENOTSUP</a> =  0x06, 
<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a7eb36788d96ba4f334a87c27842d6785">ENGINE_EWOULDBLOCK</a> =  0x07, 
<br/>
&nbsp;&nbsp;<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a9381fefc09e75ace2d7879b1a9ae870a">ENGINE_E2BIG</a> =  0x08, 
<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942afcdb2411547eaeb01c8eebf3e13a6c6c">ENGINE_WANT_MORE</a> =  0x09, 
<a class="el" href="group___engine.html#gga2ae886fae640170aa47e2f5fad851942a86a31e7fdd6d4015d03238f75c7bd37d">ENGINE_FAILED</a> =  0xff
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Response codes for engine operations. </p>
 <a href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga319505a6161227851720785676bade01">ENGINE_STORE_OPERATION</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group___engine.html#gga319505a6161227851720785676bade01accfb4a0fba17f4822ae1f255c742afe3">OPERATION_ADD</a> =  1, 
<a class="el" href="group___engine.html#gga319505a6161227851720785676bade01a5662626ceb79917533976176d46e72fa">OPERATION_SET</a>, 
<a class="el" href="group___engine.html#gga319505a6161227851720785676bade01a4d7a993794c148cf0c3ad30271a6ed91">OPERATION_REPLACE</a>, 
<a class="el" href="group___engine.html#gga319505a6161227851720785676bade01aa05f4b18e658a526bf0669e433dfe565">OPERATION_APPEND</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="group___engine.html#gga319505a6161227851720785676bade01a297f0f42746c0cc2ef547595e8cf9d9c">OPERATION_PREPEND</a>, 
<a class="el" href="group___engine.html#gga319505a6161227851720785676bade01aae1d377f8eb91d018875f2a95b01cff9">OPERATION_CAS</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Engine storage operations. </p>
 <a href="group___engine.html#ga319505a6161227851720785676bade01">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___engine.html#gae315dc9bbd0d1cb8fbdacca8e31fd20e">rel_time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga1ff8f68d7b14e73348265f6e1ce933e8">realtime</a> (const time_t exptime)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the relative time for the given time_t value.  <a href="group___engine.html#ga1ff8f68d7b14e73348265f6e1ce933e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#gac0d2c2ceff296e9aeceb5d58811b8012">ITEM_get_cas</a> (const <a class="el" href="structitem.html">item</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the CAS ID from an <a class="el" href="structitem.html" title="Data common to any item stored in memcached.">item</a>.  <a href="group___engine.html#gac0d2c2ceff296e9aeceb5d58811b8012"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga625b514611a2e965f5945d3623aaa00e">ITEM_set_cas</a> (<a class="el" href="structitem.html">item</a> *, uint64_t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the CAS id on an <a class="el" href="structitem.html" title="Data common to any item stored in memcached.">item</a>.  <a href="group___engine.html#ga625b514611a2e965f5945d3623aaa00e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga5e73e3731b3b8eec3c6e40a73cb50d17">ITEM_key</a> (const <a class="el" href="structitem.html">item</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the key from an <a class="el" href="structitem.html" title="Data common to any item stored in memcached.">item</a>.  <a href="group___engine.html#ga5e73e3731b3b8eec3c6e40a73cb50d17"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga6d25447921c853b31fdd9852f72848cf">ITEM_data</a> (const <a class="el" href="structitem.html">item</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the data from an <a class="el" href="structitem.html" title="Data common to any item stored in memcached.">item</a>.  <a href="group___engine.html#ga6d25447921c853b31fdd9852f72848cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga2485797b0e4edea9d47cdaf7977c8a0f">ITEM_set_data_ptr</a> (const <a class="el" href="structitem.html">item</a> *, void *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the location of the data for the given <a class="el" href="structitem.html" title="Data common to any item stored in memcached.">item</a>.  <a href="group___engine.html#ga2485797b0e4edea9d47cdaf7977c8a0f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#gad16ff47a409662290ca28b2765ce5c1d">notify_io_complete</a> (const void *cookie, <a class="el" href="group___engine.html#ga2ae886fae640170aa47e2f5fad851942">ENGINE_ERROR_CODE</a> status)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Let a connection know that IO has completed.  <a href="group___engine.html#gad16ff47a409662290ca28b2765ce5c1d"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="group___engine.html#gae315dc9bbd0d1cb8fbdacca8e31fd20e">rel_time_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engine.html#ga21b2a3d4ff751fe99cdca2d14babc559">current_time</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The current time.  <a href="group___engine.html#ga21b2a3d4ff751fe99cdca2d14babc559"></a><br/></td></tr>
</table>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Fri Nov 20 00:21:43 2009 for memcachedpublicAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
